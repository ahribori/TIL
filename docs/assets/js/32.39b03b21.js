(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{216:function(e,s,t){"use strict";t.r(s);var r=t(0),a=Object(r.a)({},function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"windows-환경에서-nginx에-letsencrypt-https-인증서-적용하기"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#windows-환경에서-nginx에-letsencrypt-https-인증서-적용하기","aria-hidden":"true"}},[e._v("#")]),e._v(" Windows 환경에서 Nginx에 letsencrypt https 인증서 적용하기")]),e._v(" "),t("blockquote",[t("h3",{attrs:{id:"환경"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#환경","aria-hidden":"true"}},[e._v("#")]),e._v(" 환경")])]),e._v(" "),t("ul",[t("li",[e._v("Windows server 2012 R2")]),e._v(" "),t("li",[e._v("nginx 1.12")]),e._v(" "),t("li",[e._v("letsencrypt-win-simple 1.9.7")]),e._v(" "),t("li",[e._v("인증할 도메인(ahribori.com)과 연결된 서버")])]),e._v(" "),t("h2",{attrs:{id:"_1-letsencrypt-다운로드"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-letsencrypt-다운로드","aria-hidden":"true"}},[e._v("#")]),e._v(" 1. letsencrypt 다운로드")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/Lone-Coder/letsencrypt-win-simple/releases",target:"_blank",rel:"noopener noreferrer"}},[e._v("letsencrypt-win-simple"),t("OutboundLink")],1),e._v("\n에서 다운로드 받아 적당한 위치에 압축을 푼다.")]),e._v(" "),t("h2",{attrs:{id:"_2-letsencrypt-인증"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-letsencrypt-인증","aria-hidden":"true"}},[e._v("#")]),e._v(" 2. letsencrypt 인증")]),e._v(" "),t("blockquote",[t("h3",{attrs:{id:"_2-1-커맨드-창을-열어-letsencrypt-exe-실행"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-커맨드-창을-열어-letsencrypt-exe-실행","aria-hidden":"true"}},[e._v("#")]),e._v(" 2-1. 커맨드 창을 열어 letsencrypt.exe 실행")]),e._v(" "),t("h3",{attrs:{id:"_2-2-이메일-입력"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-이메일-입력","aria-hidden":"true"}},[e._v("#")]),e._v(" 2-2. 이메일 입력")])]),e._v(" "),t("p",[e._v("인증서가 만료되기 한 달 전에 메일로 알려준다.")]),e._v(" "),t("blockquote",[t("h3",{attrs:{id:"_2-3-인증-모드-선택-m-입력-manual-mode"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-인증-모드-선택-m-입력-manual-mode","aria-hidden":"true"}},[e._v("#")]),e._v(" 2-3. 인증 모드 선택: M 입력 (Manual Mode)")]),e._v(" "),t("h3",{attrs:{id:"_2-4-도메인-입력-ahribori-com"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-도메인-입력-ahribori-com","aria-hidden":"true"}},[e._v("#")]),e._v(" 2-4. 도메인 입력: ahribori.com")]),e._v(" "),t("h3",{attrs:{id:"_2-5-web-root-경로-입력-ahribori-com-서버의-web-root-절대-경로"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-web-root-경로-입력-ahribori-com-서버의-web-root-절대-경로","aria-hidden":"true"}},[e._v("#")]),e._v(" 2-5. Web root 경로 입력: ahribori.com 서버의 Web root 절대 경로")])]),e._v(" "),t("p",[e._v("nginx public 폴더 절대 경로를 지정해도 되고 nginx를 reverse proxy로서 이용하고 있다면\n실제로 포워딩 되는 서버의 웹 루트 폴더의 절대 경로를 적으면 된다.\n나의 경우는 node.js express 서버를 이용하고 있기 때문에 express 프레임워크의 static path로 설정한\n경로를 적었다.")]),e._v(" "),t("blockquote",[t("h3",{attrs:{id:"_2-6-스케줄러-등록-할-지-말지-y-n-y"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-6-스케줄러-등록-할-지-말지-y-n-y","aria-hidden":"true"}},[e._v("#")]),e._v(" 2-6. 스케줄러 등록 할 지 말지 (y/n) : y")])]),e._v(" "),t("p",[e._v("letsencrypt 인증서는 꽁짜라 유효 기간이 3개월 밖에 되지 않는다. 3개월마다 수동으로 인증서를 갱신하려면\n정말 귀찮은데 스케쥴러로 등록해두면 2개월 좀 넘었을 때 자동으로 갱신해준다. 무조건 y.")]),e._v(" "),t("h2",{attrs:{id:"_3-nginx에-https-설정-추가"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-nginx에-https-설정-추가","aria-hidden":"true"}},[e._v("#")]),e._v(" 3. nginx에 https 설정 추가")]),e._v(" "),t("p",[e._v("위 과정에서 에러가 나지 않았으면, "),t("br"),e._v("\nC:\\Users\\사용자계정\\AppData\\Roaming\\letsencrypt-win-simple\\httpsacme-v01.api.letsencrypt.org "),t("br"),e._v("\n디렉토리 안에 인증서와 키체인이 생성되었을 것이다.")]),e._v(" "),t("p",[e._v("nginx에 설정을 추가하자.")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('server {\n\tlisten       443;\n\tserver_name  ahribori.com;\n\n\tssl_certificate\tC:\\Users\\사용자계정\\AppData\\Roaming\\letsencrypt-win-simple\\httpsacme-v01.api.letsencrypt.org\\ahribori.com-chain.pem;\n\tssl_certificate_key\tC:\\Users\\사용자계정\\AppData\\Roaming\\letsencrypt-win-simple\\httpsacme-v01.api.letsencrypt.org\\ahribori.com-key.pem;\n\n\tssl on;\n\tssl_session_cache  builtin:1000  shared:SSL:10m;\n\tssl_protocols  TLSv1 TLSv1.1 TLSv1.2;\n\tssl_ciphers HIGH:!aNULL:!eNULL:!EXPORT:!CAMELLIA:!DES:!MD5:!PSK:!RC4;\n\tssl_prefer_server_ciphers on;\n\n\tlocation / {\n            proxy_set_header Upgrade $http_upgrade;\n            proxy_set_header Connection "upgrade";\n            proxy_http_version 1.1;\n            proxy_set_header X-Real-IP $remote_addr;\n            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n            proxy_set_header Host $http_host;\n            proxy_set_header X-NginX-Proxy true;\n\n            proxy_pass http://포워딩 될 서버 주소;\n            proxy_redirect off;\n        }\n\n        error_page   500 502 503 504  /50x.html;\n        location = /50x.html {\n            root   html;\n        }\n    }\n')])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br"),t("span",{staticClass:"line-number"},[e._v("9")]),t("br"),t("span",{staticClass:"line-number"},[e._v("10")]),t("br"),t("span",{staticClass:"line-number"},[e._v("11")]),t("br"),t("span",{staticClass:"line-number"},[e._v("12")]),t("br"),t("span",{staticClass:"line-number"},[e._v("13")]),t("br"),t("span",{staticClass:"line-number"},[e._v("14")]),t("br"),t("span",{staticClass:"line-number"},[e._v("15")]),t("br"),t("span",{staticClass:"line-number"},[e._v("16")]),t("br"),t("span",{staticClass:"line-number"},[e._v("17")]),t("br"),t("span",{staticClass:"line-number"},[e._v("18")]),t("br"),t("span",{staticClass:"line-number"},[e._v("19")]),t("br"),t("span",{staticClass:"line-number"},[e._v("20")]),t("br"),t("span",{staticClass:"line-number"},[e._v("21")]),t("br"),t("span",{staticClass:"line-number"},[e._v("22")]),t("br"),t("span",{staticClass:"line-number"},[e._v("23")]),t("br"),t("span",{staticClass:"line-number"},[e._v("24")]),t("br"),t("span",{staticClass:"line-number"},[e._v("25")]),t("br"),t("span",{staticClass:"line-number"},[e._v("26")]),t("br"),t("span",{staticClass:"line-number"},[e._v("27")]),t("br"),t("span",{staticClass:"line-number"},[e._v("28")]),t("br"),t("span",{staticClass:"line-number"},[e._v("29")]),t("br"),t("span",{staticClass:"line-number"},[e._v("30")]),t("br"),t("span",{staticClass:"line-number"},[e._v("31")]),t("br")])]),t("p",[e._v("설정을 저장한 다음,")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("nginx.exe -s reload\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("nginx를 재시작 하고 ahribori.com으로 접속해보면 인증된 https로 접속되는 것을 확인할 수 있다.")])])},[],!1,null,null,null);s.default=a.exports}}]);